@import url("https://fonts.googleapis.com/css2?family=Dongle:wght@300;400;700&display=swap");

:root {
  --Main: #ff00dd; /* Bright Pink/Magenta */
  --Background: #c4e0f7; /* Light Sky Blue */
  --Accent: #ff7cc4; /* Light Pink */
  --Highlight: #75d8ff; /* Light Blue */
  --Alt1: #ee2bb3; /* Deep Pink/Magenta */
  --Alt2: #ff0040; /* Bright Red-Pink */
  --SubdivisionBeatColor: #52ffc5; /* Thistle (Light Purple) - for subdivision beats */
}


body {
  background-color: var(--Background);
  font-family: "Dongle", sans-serif;
  font-size: 2em; /* Base font size for mobile (e.g., 32px if root is 16px) */
  display: flex;
  justify-content: center;
  align-items: center;
  height: auto;
  width: 90%;
  margin: auto;
  padding: 0;
  user-select: none;
}
body *{
    transition: all 250ms;
}

body *:focus {
  outline: var(--Accent) 4px solid;
}

.decrease-tempo:hover,
.start-stop-btn:hover {
  box-shadow: var(--Main) 3px 6px 8px;
  transition-duration: 200ms;
}

.tempo-slider *:hover,
.bar-display-container .measure-bar-segment:hover {
  box-shadow: var(--Main) 0px 6px 8px;
  transition-duration: 200ms;
  scale: 1.1;
}

.beat-settings *:hover,
.bar-settings *:hover,
.increase-tempo:hover {
  box-shadow: var(--Main) -3px 6px 8px;
  transition-duration: 200ms;
}

.main-container {
  height: auto;
  margin: auto;
}

.metronome-container {
  width: auto;
  height: auto;
  display: flex;
  justify-content: center;
  align-content: space-evenly;
  flex-wrap: wrap;
  flex-direction: row;
}

.tempo-container,
.measures-container,
.bar-settings-container {
  background: var(--Background);
  text-align: center;
}

.tempo-container {
  font-size: 1.5em; /* Relative to body font size */
  width: 100%;
}

.tempo,
.beats-per-current-measure,
.bars-length {
  font-weight: bold;
  color: var(--Main);
  font-size: larger;
}

.tempo-text {
  font-weight: lighter;
  font-size: smaller;
}

.tempo-settings {
  margin: 10px;
}

.tempo-slider {
  width: auto;
  padding: 0 15px; /* Reduced padding for mobile */
}

.slider {
  width: 100%;
}

input[type="range"] {
  -webkit-appearance: none;
  background: transparent;
}

input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none;
}

input[type="range"]:focus {
  outline: none;
}

input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 25px;
  height: 25px;
  border-radius: 50%;
  background: var(--Main);
  margin-top: -12px;
}

input[type="range"]::-webkit-slider-container {
  background: var(--Background);
}

input[type="range"]::-webkit-slider-runnable-track {
  background: var(--Alt1); /* Was black, now purple for consolidation */
  width: 100%;
  height: 2px;
}

.tempo-settings,
.beat-settings,
.bar-settings {
  display: flex;
  justify-content: space-evenly;
}

.beat-settings,
.bar-settings {
  outline: 1px solid var(--Highlight);
  background: var(--Accent); /* Was white, now yellow-green for contrast with blue outline */
  width: 100%;
}

span {
  text-transform: uppercase;
}

.start-stop-btn {
  height: 160px; /* Adjusted for mobile */
  width: 160px;  /* Adjusted for mobile */
  padding: 5px;
  margin: 5px;
  text-align: center;
  line-height: 5;
}

.measures-container,
.bar-settings-container {
  width: 100%; /* Full width on mobile when stacked */
}

.measure-settings-container,
.bar-settings-container {
  width: 100%;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
}

.adjust-tempo,
.adjust-bar-length,
.adjust-measure-length,
.start-stop-btn {
  outline: 1px solid var(--Background);
  border-radius: 50%;
  background: var(--Highlight);
  margin: auto;
  display: flex; /* For centering content */
  align-items: center; /* For centering content */
  justify-content: center; /* For centering content */
  cursor: pointer;
}

.adjust-tempo:hover,
.adjust-bar-length:hover,
.adjust-measure-length:hover,
.start-stop-btn:hover {
  outline: 2px solid var(--Highlight);
  border-radius: 50%;
  background: var(--Alt1); /* Was dodgerblue, now purple */
  color: var(--Accent); /* Was whitesmoke, now yellow-green for text on purple */
}

.adjust-tempo {
  height: 90px; /* Adjusted for mobile */
  width: 90px;  /* Adjusted for mobile */
  margin: auto;
}

.adjust-measure-length,
.adjust-bar-length {
  height: 60px; /* Adjusted for mobile */
  width: 60px;  /* Adjusted for mobile */
  margin: auto;
  padding: 0px;
}

.bar-display {
    width: 100%;
    display: flex;
    align-items: center;
}
select {
    height: 50px;
    width: 50px;
    outline-color: var(--Main);
    border-color: transparent;
}
select::after, option {
   background-color: var(--Main);
    outline-color: var(--Main);
    border-color: transparent;
}
select:active {
   background-color: var(--Alt1); /* Was dodgerblue */
    outline-color: var(--Main);
    border-color: transparent;
}

.bar-display-container {
  background: var(--Background);
  outline: var(--Highlight) 1px solid;
  border-radius: 5px;
  width: 100%;
  height: auto; 
  padding: 5px; /* Reduced padding for mobile */
  align-items: center;
  justify-content: center;
    display: flex; /* Allows bars to sit side-by-side */
    flex-wrap: wrap; /* Allows bars to wrap to next line if not enough space */
  margin: 5px 0; /* Reduced margin for mobile, 0 for left/right as width is 100% */
  min-height: 0; /* If needed, ensure it has a purpose */
}

.bar-visual {
    padding: 8px; /* Adjusted padding */
    margin: 5px;
    border: 1px solid var(--Background); /* Was #ccc */
    background-color: var(--Highlight); /* Was #f9f9f9 */
    cursor: pointer;
    /* text-align: center; Flex properties will handle alignment */
    min-width: 40px; /* Ensure clickable area */
    min-height: 30px; /* Give some base height */
    display: flex; /* Arrange beat squares horizontally */
    flex-wrap: wrap; /* Allow squares to wrap if too many */
    gap: 4px; /* Spacing between beat squares */
    align-items: center; /* Vertically align squares */
}

.bar-visual.selected {
    border-color: var(--Alt1); /* Was dodgerblue */
    background-color: var(--Main); /* Was #e0efff */
    outline: 2px solid var(--Alt2); /* Was dodgerblue */
    box-shadow: 0 0 8px var(--Alt1); /* Was rgba(30, 144, 255, 0.5), alpha lost */
}
.beat-square {
    width: 12px;
    height: 12px;
    background-color: var(--Background); /* Was lightgrey */
    border: 1px solid var(--Highlight); /* Was #adadad */
    border-radius: 2px;
    transition: all 100ms ease-in-out; /* For smooth highlight transition */
}

/* Style for beat squares that are subdivisions */
.beat-square.subdivision {
    background-color: var(--SubdivisionBeatColor);
}

/* .highlighted class (already existing) will be used for beat squares */

.total-beats-display, select {
  outline: 1px solid var(--Main);
  padding: 4px;
  background: var(--Highlight);
  border-radius: 8px;
  font-size: 0.6em; /* Relative to body, smaller for UI elements */
  width: auto;
  text-align: center; 
  height: auto; /* Let padding and content define height, or set explicitly if needed */
  margin-right: auto;
  
}
.measure-bar {
  background: var(--Main);
  display: flex;
  gap: 2px;
  width: 3em;
  align-items: center;
  padding: 3px; /* Kept from upstream */
  margin: 0px;
  border-radius: 8px; /* Kept from upstream */
  justify-content: center;
  /* flex-flow: row nowrap; from stashed changes is default for flex-direction: row */
}

.measure-bar:nth-of-type(odd) {
  filter: brightness(1.25);
  height: 0.5em;
}

.measure-bar:nth-of-type(even) {
  height: 0.25em;
  filter: brightness(1.7);
  border-radius: 0px;
}

.measure-bar:first-of-type {
  height: 1em;
  filter: brightness(1);
  border-radius: 8px; /* Kept from upstream */
  /* background: hotpink; from stashed changes - already on .measure-bar */
}

.measure-bar-segment {
    height: 90%;
    width: 90%;
    margin: 1px 3px;
    border-radius: 8px;
    background: var(--Alt1); /* Was rgba(0,0,0,0.25), now solid purple */
}
.measure-bar-segment:nth-of-type(odd){
    background: var(--Alt2); /* Was rgba(0,0,0,0.5), now solid red/pink for distinction */
}
.highlighted{ /* Kept from upstream */
  scale: 1.55;
  margin: 0 0.1em;
  border-radius: 50%;
  background: var(--Accent);
}
/* Base styles (mobile-first approach) */
.metronome-container {
  flex-direction: column; /* Stack elements on small screens */
}


/* Tablet and larger */
@media (min-width: 768px) {
  body {
    font-size: 2.5em; /* e.g., 40px if root is 16px */
  }
  .metronome-container {
    flex-direction: row; /* Side-by-side on larger screens */
  }
  .measures-container,
  .bar-settings-container {
    width: 40%;
  }
  .tempo-slider {
    padding: 0 30px; /* Restore padding for larger screens */
  }
  .bar-display-container {
    padding: 10px;
    margin: 10px 0;
  }
  .start-stop-btn {
    height: 200px;
    width: 200px;
  }
  .adjust-tempo {
    height: 110px;
    width: 110px;
  }
  .adjust-measure-length,
  .adjust-bar-length {
    height: 70px;
    width: 70px;
  }
}

/* Desktop and larger */
@media (min-width: 1024px) {
  body {
    font-size: 3em; /* e.g., 48px if root is 16px - original large size */
  }
  .start-stop-btn {
    height: 250px;
    width: 250px;
  }
  .adjust-tempo {
    height: 130px;
    width: 130px;
  }
}
